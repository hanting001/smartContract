<div [hidden]="envState.checkWeb3" class="jumbotron bg-warning text-center" id="changePage">
    <h1>您要购买航班延误互助计划</h1>
    <p class="lead">您将需要一个安全的地方存储您的航班延误互助计划！像MetaMask这样的安全钱包即是完美之地。同时您也可以通过钱包（如：Parity）正常购买航班延误互助计划（无需另设密码）</p>
    <button type="button" class="btn btn-primary" (click)="installWallet()">
        安装MetaMask
    </button>
</div>

<div [hidden]="envState.checkWeb3&&envState.checkAccount" class="jumbotron bg-warning text-center" id="changePage">
    <h1>您的账号被锁住了</h1>
    <p class="lead">只需打开MetaMask并按照说明进行解锁即可</p>

</div>

<div [hidden]="!envState.checkWeb3" class="jumbotron jumbotron-fluid bg-white">
    <div class="container">
        <div [hidden]="loadingProgress == 0" class="progress" style="height: 1px;">
            <!-- <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="{{loadingProgress}}" aria-valuemin="0" aria-valuemax="100"></div> -->
            <progressbar class="progress-striped active" [value]="loadingProgress" type="info"></progressbar>
        </div>
        <!-- <div class="row">
            <div class="col"> -->
        <tabset>
            <tab id="Bets" heading="My Bets" id="tab1" (select)="onSelect($event)">
                <div class="row align-items-center">
                    <div class="col text-right">
                        <span class="oi oi-loop-circular text-secondary" style="font-size: 0.5rem"></span>
                        <a href="javascript:void(0)" (click)="refresh(1)" class="text-secondary" style="font-size: 0.5rem">Refresh Data</a>
                    </div>
                </div>
                <div class="card  p-3 mt-3">
                    <table class="table table-striped table-sm mb-4" *ngFor="let info of betInfos">
                        <thead class="border-bottom-0">
                            <tr>
                                <th style="width:50%;" colspan="2">
                                    <img [src]="info.gameInfo.p1|nationFlag" style="border:1px solid #c7c6c6">
                                    <p class="d-inline small">{{info.gameInfo.time+'000'|date:'yyyy-MM-dd HH:mm'}}</p>
                                    <img [src]="info.gameInfo.p2|nationFlag" style="border:1px solid #c7c6c6">
                                </th>
                                <th style="width:25%;" class="align-middle text-right text-success ">
                                    <small>status:</small> {{info.gameInfo.status | gameStatus}}
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <thead class="">
                            <tr class="text-center">
                                <th>
                                    Score
                                </th>
                                <th>
                                    Value
                                </th>
                                <th>
                                    Win?
                                </th>
                                <th>

                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let bet of info.scoreInfos" class="text-center">
                                <td style="width:25%">
                                    {{bet.score}}
                                </td>
                                <td style="width:25%" class="align-middle">
                                    {{bet.value | fromWei}}
                                    <small>ETH</small>
                                </td>
                                <td style="width:25%">
                                    {{bet.win}}
                                </td>
                                <td style="width:25%">
                                    <button *ngIf="bet.win&&bet.win!='No'&&bet.win!='Underway'" type="button" (click)="winBet(info.gameInfo,bet)" class="btn btn-primary btn-sm">Win Bet</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </tab>
            <tab id="Votes" heading="My Votes" (select)="onSelect($event)">
                <div class="row align-items-center">
                    <div class="col text-right">
                        <span class="oi oi-loop-circular text-secondary" style="font-size: 0.5rem"></span>
                        <a href="javascript:void(0)" (click)="refresh(2)" class="text-secondary" style="font-size: 0.5rem">Refresh Data</a>
                    </div>
                </div>
                <div class="card  p-3 mt-3">
                    <table class="table table-striped table-sm mb-4" *ngFor="let info of voteInfos">
                        <thead class="border-bottom-0">
                            <tr>
                                <th scope="col" colspan="2" class="pl-3">
                                    <img [src]="info.gameInfo.p1|nationFlag" style="border:1px solid #c7c6c6">
                                    <p class="d-inline small">{{info.gameInfo.time+'000'|date:'yyyy-MM-dd HH:mm'}}</p>
                                    <img [src]="info.gameInfo.p2|nationFlag" style="border:1px solid #c7c6c6">
                                </th>
                                <th scope="col" class="align-middle text-right text-success pr-3">
                                    <small>status:</small> {{info.gameInfo.status | gameStatus}}
                                </th>
                            </tr>
                        </thead>
                        <thead class="">
                            <tr class="text-center">
                                <th>
                                    Vote
                                </th>
                                <th>
                                    Weight
                                </th>
                                <th>
                                    Win?
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="text-center">
                                <td>
                                    {{info.voteInfo.vote}}
                                </td>
                                <td class="align-middle">
                                    {{info.voteInfo.value | fromWei}}
                                </td>
                                <td>
                                    {{info.voteInfo.win}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </tab>
        </tabset>
        <!-- </div>
        </div> -->
    </div>
</div>
